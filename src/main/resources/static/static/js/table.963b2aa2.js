(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"0556":function(e,t,i){"use strict";var a=i("ed19"),s=i.n(a);s.a},"077a":function(e,t,i){},"08c4":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 食品类型管理\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:e.sixteen_categories}},[e._v("查看大类食品类型")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("增加自定义食品类型")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"自定义食品类型"}},[i("span",[e._v(e._s(t.row.type_name))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"type_name",label:"自定义食品类型"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"增加自定义食品类型",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.addform,rules:e.rules}},[i("el-form-item",{attrs:{prop:"food_type",label:"类型","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.food_type,callback:function(t){e.$set(e.addform,"food_type",t)},expression:"addform.food_type"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addnewsiinformation()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"大类食品类型",visible:e.sixteencategoriesVisible},on:{"update:visible":function(t){e.sixteencategoriesVisible=t}}},[i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.sixteencategoriesdata,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"食品大类"}},[i("span",[e._v(e._s(t.row.type_name))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"type_name",label:"食品大类"}})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.sixteencategoriesquery.pageIndex,"page-size":e.sixteencategoriesquery.pageSize,total:e.sixteencategoriesquery.pageTotal},on:{"current-change":e.handlesixteencategoriesPageChange}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.sixteencategoriesVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(i("365c"),i("9474")),o={components:{ElCheckbox:n["a"]},name:"foodtypemanagement",data:function(){return{searchname:"",rules:{food_type:[{required:!0,message:"请输入食品类型",trigger:"blur"}]},formLabelWidth:"70px",query:{address:"",name:"",pageIndex:1,pageSize:8},tableData:[],dialogFormVisible:!1,sixteencategoriesVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,addform:{food_type:""},checked:!0,sixteencategoriesdata:[],sixteencategoriesquery:{address:"",name:"",pageIndex:1,pageSize:10,pageTotal:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$axios.post("/sstype/findcustomizecategories",this.$qs.stringify({pageIndex:this.query.pageIndex,pageSize:this.query.pageSize})).then((function(t){null!=t&&(e.tableData=t.data.data.list,e.pageTotal=t.data.data.total)}))},handleDelete:function(e,t){var i=this;this.$confirm("删除后抽检库中所有抽检点都将不包含该食品类型！！确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.post("/sstype/deletecustomizecategories",i.$qs.stringify({id:t.id})).then((function(t){console.log(t),null!=t&&(i.$message.success("删除成功"),i.tableData.splice(e,1))}))})).catch((function(){}))},addnewsiinformation:function(){var e=this;this.$axios.post("/sstype/addcustomizecategories",this.$qs.stringify({food_type:this.addform.food_type})).then((function(t){null!=t&&(null!=e.addform.food_type?(e.$message.success("添加成功！"),e.getData()):e.$message.error("请填写所需信息"))}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},sixteen_categories:function(){var e=this;this.sixteencategoriesVisible=!0,this.$axios.post("/sstype/findsixteencategories",this.$qs.stringify({pageIndex:this.sixteencategoriesquery.pageIndex,pageSize:this.sixteencategoriesquery.pageSize})).then((function(t){null!=t&&(e.sixteencategoriesdata=t.data.data,e.sixteencategoriesquery.pageTotal=31)}))},handlesixteencategoriesPageChange:function(e){this.$set(this.sixteencategoriesquery,"pageIndex",e),this.sixteen_categories()}}},r=o,l=(i("0c11"),i("0556"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"34d2d3ec",null);t["default"]=c.exports},"0915":function(e,t,i){"use strict";i.r(t);var a,s,n,o,r,l,c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 抽检计划生成\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-select",{attrs:{placeholder:"切换默认显示城市"},model:{value:e.center,callback:function(t){e.center=t},expression:"center"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-text":"公交路线","inactive-text":"驾车路线"},model:{value:e.travelmode,callback:function(t){e.travelmode=t},expression:"travelmode"}}),i("el-button",{staticClass:"handle-del mr10",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:e.popupdrawer}},[e._v("开始生成抽检计划")])],1),i("baidu-map",{staticClass:"bm-view",attrs:{center:e.center,ak:"svq1mQqPx1vrCaI5r6GiId5pHj9bQ03G","scroll-wheel-zoom":!0},on:{ready:e.handler}},[i("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),i("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}}),i("bm-marker-clusterer",{attrs:{averageCenter:!0}},e._l(e.markers,(function(e){return i("bm-marker",{attrs:{position:{lng:e[1],lat:e[2]}}},[i("bm-label",{attrs:{content:e[0],labelStyle:{color:"red",fontSize:"4px"},offset:{width:-35,height:30}}})],1)})),1),e.travelmode?i("div",e._l(e.markers,(function(e){return i("bm-transit",{attrs:{start:{lng:e[1],lat:e[2]},end:{lng:e[4],lat:e[5]},"auto-viewport":!0,panel:!1}})})),1):e._e(),e.travelmode?e._e():i("div",e._l(e.markers,(function(e){return i("bm-driving",{attrs:{start:{lng:e[1],lat:e[2]},end:{lng:e[4],lat:e[5]},"auto-viewport":!0,panel:!1}})})),1)],1)],1),i("el-drawer",{ref:"drawer",attrs:{title:"抽检计划生成",visible:e.drawer,direction:"rtl","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"demo-drawer__content"},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("div",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("span",[e._v("选择此次抽检的食品类型数量(必选)")]),e._l(e.foodtypes,(function(t,a){return i("a",[i("div",{staticStyle:{width:"100%"}},[i("el-select",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"请选择"},model:{value:e.quantityvalue[a],callback:function(t){e.$set(e.quantityvalue,a,t)},expression:"quantityvalue[index]"}},e._l(e.quantity,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("a",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[e._v(e._s(t.type_name))])],1)])}))],2),i("div",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("span",[e._v("选择参与此次抽检的抽检主体(必选)")]),i("el-checkbox-group",{model:{value:e.selectedsamplingaccount,callback:function(t){e.selectedsamplingaccount=t},expression:"selectedsamplingaccount"}},e._l(e.samplingaccount,(function(t){return i("el-checkbox",{key:t.id,staticStyle:{"margin-top":"20px"},attrs:{label:t,border:""}},[e._v(e._s(t.s_account))])})),1)],1),i("div",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("span",[e._v("输入此次要抽检多少个商家(必选)")]),i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"请输入此次要抽检多少个商家"},model:{value:e.numbers,callback:function(t){e.numbers=t},expression:"numbers"}})],1),i("div",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("span",[e._v("输入此次抽检的出发点(必选)")]),i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"请输入此次抽检的出发点"},model:{value:e.starting_point,callback:function(t){e.starting_point=t},expression:"starting_point"}})],1)]),i("div",{staticClass:"demo-drawer__footer",staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("el-button",{on:{click:e.cancelForm}},[e._v("取 消")]),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.startgenerating}},[e._v("开始生成")])],1)],1)])])],1)},d=[],u=(i("6b54"),i("365c"),i("9474")),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.hasBmView?e._e():i("div",{ref:"view",staticStyle:{width:"100%",height:"100%"}}),e._t("default")],2)},h=[],m=i("7f25e"),f=m["a"],g=i("2877"),b=Object(g["a"])(f,p,h,!1,null,null,null),y=b.exports,v=i("6a21"),_=v["a"],x=Object(g["a"])(_,a,s,!1,null,null,null),w=x.exports,k=i("b5c1"),C=k["a"],S=Object(g["a"])(C,n,o,!1,null,null,null),$=S.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._t("default")],2)},M=[],O=(i("c5f6"),i("c296")),z=i.n(O),D=i("76f3"),B=i("2da4"),T={name:"bml-marker-clusterer",mixins:[Object(B["a"])("markerClusterer")],props:{gridSize:{type:Object},maxZoom:{type:Number},minClusterSize:{type:Number},styles:{type:Array,default:function(){return[]}},averageCenter:{type:Boolean,default:!1}},watch:{gridSize:{handler:function(e){var t=this.BMap,i=this.originInstance;i.setGridSize(t,e.map)},deep:!0},maxZoom:function(e){var t=this.originInstance;t.setMaxZoom(e)},minClusterSize:{handler:function(e){var t=this.BMap,i=this.originInstance;i.setMinClusterSize(Object(D["d"])(t,e))},deep:!0},styles:{handler:function(e){var t=this.BMap,i=this.originInstance,a=JSON.parse(JSON.stringify(e)).map((function(e){return e.size=e.size&&Object(D["d"])(t,e.size),e}));i.setStyles(a)},deep:!0},averageCenter:function(e){this.reload()}},methods:{load:function(){var e=this,t=this.BMap,i=this.map,a=this.gridSize,s=this.minClusterSize,n=this.maxZoom,o=this.styles,r=this.averageCenter;this.originInstance=new z.a(i,{gridSize:a&&Object(D["d"])(t,a),maxZoom:n,minClusterSize:s&&Object(D["d"])(t,s),styles:o.map((function(e){return e.size=Object(D["d"])(t,e.size),e})),isAverageCenter:r}),this.$nextTick((function(){var i=e.$children.map((function(e){return e.originInstance})).filter((function(e){return e instanceof t.Marker}));e.originInstance.addMarkers(i)}))}},beforeCreate:function(){this.preventChildrenRender=!0}},j=T,q=Object(g["a"])(j,I,M,!1,null,null,null),E=q.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._t("default")],2)},L=[],V=i("165e"),A=V["a"],F=Object(g["a"])(A,P,L,!1,null,null,null),Z=F.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._t("default")],2)},N=[],R=i("7b51"),G=R["a"],H=Object(g["a"])(G,W,N,!1,null,null,null),J=H.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.panel,expression:"panel"}]},[e._t("default")],2)},Y=[],K=i("16d1"),X=K["a"],Q=Object(g["a"])(X,U,Y,!1,null,null,null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.panel,expression:"panel"}]},[e._t("default")],2)},ie=[],ae=i("b0f5"),se=ae["a"],ne=Object(g["a"])(se,te,ie,!1,null,null,null),oe=ne.exports,re=i("4fab"),le={name:"bm-label",render:function(){},mixins:[Object(B["a"])("overlay")],props:{content:{type:String},title:{type:String},offset:{},position:{},labelStyle:{},zIndex:{type:Number,default:0},massClear:{type:Boolean,default:!0}},watch:{content:function(e){this.originInstance.setContent(e)},title:function(e){this.originInstance.setTitle(e)},"offset.width":function(e,t){var i=this.BMap;e.toString()!==t.toString()&&this.originInstance.setOffset(Object(D["d"])(i,{width:e,height:this.offset.height}))},"offset.height":function(e,t){var i=this.BMap;e.toString()!==t.toString()&&this.originInstance.setOffset(Object(D["d"])(i,{width:this.offset.width,height:e}))},"position.lng":function(e,t){var i=this.BMap,a=e;e.toString()!==t.toString()&&a>=-180&&a<=180&&this.originInstance.setCenter(Object(D["c"])(i,{lng:a,lat:this.center.lat}))},"position.lat":function(e,t){var i=this.BMap,a=e;e.toString()!==t.toString()&&a>=-74&&a<=74&&this.originInstance.setCenter(Object(D["c"])(i,{lng:this.center.lng,lat:a}))},labelStyle:{handler:function(e){this.originInstance.setStyle(e)},deep:!0},zIndex:function(e){this.originInstance.setZIndex(e)},massClear:function(e){e?this.originInstance.enableMassClear():this.originInstance.disableMassClear()}},methods:{load:function(){var e=this.BMap,t=this.map,i=this.content,a=this.title,s=this.offset,n=this.position,o=this.labelStyle,r=this.zIndex,l=this.massClear,c=this.$parent,d=new e.Label(i,{offset:Object(D["d"])(e,s),position:Object(D["c"])(e,n),enableMassClear:l});this.originInstance=d;try{c.originInstance.setLabel(d)}catch(u){t.addOverlay(d)}a&&d.setTitle(a),o&&d.setStyle(o),r&&d.setZIndex(r),re["a"].call(this,d)}}},ce=le,de=Object(g["a"])(ce,r,l,!1,null,null,null),ue=de.exports,pe={components:{ElCheckbox:u["a"],BaiduMap:y,BmScale:w,BmNavigation:$,BmMarkerClusterer:E,BmMarker:Z,BmInfoWindow:J,BmTransit:ee,BmDriving:oe,BmLabel:ue},name:"samplinginspectionplangeneration",data:function(){return{options:[{value:"杭州市",label:"杭州市"},{value:"嘉兴市",label:"嘉兴市"},{value:"湖州市",label:"湖州市"},{value:"绍兴市",label:"绍兴市"},{value:"宁波市",label:"宁波市"},{value:"台州市",label:"台州市"},{value:"温州市",label:"温州市"},{value:"金华市",label:"金华市"},{value:"衢州市",label:"衢州市"},{value:"丽水市",label:"丽水市"},{value:"舟山市",label:"舟山市"}],center:"杭州",markers:[],infoWindow:{lng:0,lat:0,show:!1,info:{samplingaddress:""}},activeName:"",travelmode:!1,drawer:!1,loading:!1,form:{},timer:null,quantity:[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"}],quantityvalue:[],foodtypes:{},typeoffoodselected:[],selectedsamplingaccount:[],samplingaccount:{},numbers:"",starting_point:"",fullscreenLoading:!1}},created:function(){this.getData()},methods:{getData:function(){},handler:function(e){e.BMap,e.map;this.center=localStorage.getItem("city")},infoWindowClose:function(e){this.infoWindow.show=!1},infoWindowOpen:function(e){this.infoWindow.show=!0},lookDetail:function(e,t){},popupdrawer:function(){var e=this;this.foodtypes=[],this.samplingaccount=[],this.quantityvalue=[],this.$axios.post("/ssaccount/selectAllCanParticipatebyadminid",this.$qs.stringify({})).then((function(t){if(null!=t){for(var i=0;i<t.data.data.listaccount.length;i++)e.samplingaccount=t.data.data.listaccount;for(i=0;i<t.data.data.listtype.length;i++)e.foodtypes=t.data.data.listtype,e.quantityvalue[i]=0;e.drawer=!0}}))},startgenerating:function(){var e=this;if(0!=this.selectedsamplingaccount.length&&null!=this.numbers&&""!=this.numbers&&null!=this.starting_point){for(var t=0,i=0;i<this.quantityvalue.length;i++)t+=this.quantityvalue[i];if(t>this.numbers)this.$message.error("抽检商家数量应大于等于抽检食品数量");else{this.fullscreenLoading=!0;var a=[],s=[];for(i=0;i<this.selectedsamplingaccount.length;i++)a[i]=this.selectedsamplingaccount[i].id;for(i=0;i<this.foodtypes.length;i++)s[i]=this.foodtypes[i].id;var n=this;this.$axios.post("/ssplan/generateplan",this.$qs.stringify({selectedsamplingaccountid:a.toString(),typeoffoodselectedid:s.toString(),quantityvalue:this.quantityvalue.toString(),numbers:this.numbers,starting_point:this.starting_point})).then((function(t){if(null!=t){n.markers=[],n.markers=t.data.data.route;var i=t.data.data.message,a=e.$createElement;n.fullscreenLoading=!1,e.$notify({title:"抽检计划生成成功",message:a("i",{style:"color: teal"},i),type:"success",dangerouslyUseHTMLString:!0,duration:0})}})),this.selectedsamplingaccount=[]}}else this.$message.error("请填选必选项！")},handleClose:function(e){var t=this;this.loading||this.$confirm("确定要提交表单吗？").then((function(i){t.loading=!0,t.timer=setTimeout((function(){e(),setTimeout((function(){t.loading=!1}),400)}),2e3)})).catch((function(e){}))},cancelForm:function(){this.drawer=!1,clearTimeout(this.timer)}}},he=pe,me=(i("f843"),i("e117"),Object(g["a"])(he,c,d,!1,null,"5b6aa54b",null));t["default"]=me.exports},"0c11":function(e,t,i){"use strict";var a=i("beb6"),s=i.n(a);s.a},"11b9":function(e,t,i){},"165e":function(e,t,i){"use strict";(function(e){i("c5f6");var a=i("2da4"),s=i("4fab"),n=i("76f3");t["a"]={name:"bm-marker",mixins:[Object(a["a"])("overlay")],props:{position:{},offset:{},icon:{},massClear:{type:Boolean,default:!0},dragging:{type:Boolean,default:!1},clicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{type:String},rotation:{type:Number},shadow:{type:Object},title:{type:String},label:{type:Object},animation:{type:String},top:{type:Boolean,default:!1},zIndex:{type:Number,default:0}},watch:{"position.lng":function(e,t){var i=this.BMap,a=this.originInstance,s=this.position,o=this.renderByParent,r=this.$parent;e!==t&&e>=-180&&e<=180&&a.setPosition(Object(n["c"])(i,{lng:e,lat:s.lat})),o&&r.reload()},"position.lat":function(e,t){var i=this.BMap,a=this.originInstance,s=this.position,o=this.renderByParent,r=this.$parent;e!==t&&e>=-74&&e<=74&&a.setPosition(Object(n["c"])(i,{lng:s.lng,lat:e})),o&&r.reload()},"offset.width":function(e,t){var i=this.BMap,a=this.originInstance;e!==t&&a.setOffset(new i.Size(e,this.offset.height))},"offset.height":function(e,t){var i=this.BMap,a=this.originInstance;e!==t&&a.setOffset(new i.Size(this.offset.width,e))},icon:{deep:!0,handler:function(e){var t=this.BMap,i=this.originInstance,a=this.rotation;i&&i.setIcon(Object(n["a"])(t,e)),a&&i&&i.setRotation(a)}},massClear:function(e){e?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},dragging:function(e){e?this.originInstance.enableDragging():this.originInstance.disableDragging()},clicking:function(){this.reload()},raiseOnDrag:function(){this.reload()},draggingCursor:function(e){this.originInstance.setDraggingCursor(e)},rotation:function(e){this.originInstance.setRotation(e)},shadow:function(e){this.originInstance.setShadow(e)},title:function(e){this.originInstance.setTitle(e)},label:function(e){this.reload()},animation:function(t){this.originInstance.setAnimation(e[t])},top:function(e){this.originInstance.setTop(e)},zIndex:function(e){this.originInstance.setZIndex(e)}},methods:{load:function(){var t=this.BMap,i=this.map,a=this.position,o=this.offset,r=this.icon,l=this.massClear,c=this.dragging,d=this.clicking,u=this.raiseOnDrag,p=this.draggingCursor,h=this.rotation,m=this.shadow,f=this.title,g=this.label,b=this.animation,y=this.top,v=this.renderByParent,_=this.$parent,x=this.zIndex,w=new t.Marker(new t.Point(a.lng,a.lat),{offset:o,icon:r&&Object(n["a"])(t,r),enableMassClear:l,enableDragging:c,enableClicking:d,raiseOnDrag:u,draggingCursor:p,rotation:h,shadow:m,title:f});this.originInstance=w,g&&w&&w.setLabel(Object(n["b"])(t,g)),w.setTop(y),w.setZIndex(x),s["a"].call(this,w),v?_.reload():i.addOverlay(w),w.setAnimation(e[b])}}}}).call(this,i("c8ba"))},"16d1":function(e,t,i){"use strict";(function(e){i("386d"),i("c5f6");var a=i("76f3"),s=i("33d3"),n=i("2da4");t["a"]={name:"bm-transit",mixins:[Object(n["a"])("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},panel:{type:Boolean,default:!0},policy:{type:String},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler:function(e){var t=this.originInstance,i=this.map;t.setLocation(e||i)},deep:!0},start:{handler:function(e){var t=this.originInstance,i=this.end,a=this.BMap;t.search(Object(s["b"])(a,e),Object(s["b"])(a,i))},deep:!0},end:{handler:function(e){var t=this.originInstance,i=this.start,a=this.BMap;t.search(Object(s["b"])(a,i),Object(s["b"])(a,e))},deep:!0},panel:function(){this.reload()},policy:function(t){this.originInstance.setPolicy(e[t])},pageCapacity:function(e){this.originInstance&&this.originInstance.setPageCapacity(e)},autoViewport:function(e){this.originInstance&&(e?this.originInstance.enableAutoViewport():this.originInstance.disableAutoViewport())},selectFirstResult:function(){this.reload()},highlightMode:function(){this.reload()}},methods:{search:function(e,t){var i=this.originInstance;i.search(e,t)},load:function(){var t=this,i=this.map,n=this.BMap,o=this.location,r=this.policy,l=this.pageCapacity,c=this.selectFirstResult,d=this.autoViewport,u=this.highlightMode,p=this.search,h=this.start,m=this.end,f=this.originInstance,g=o?Object(s["c"])(o)?Object(a["c"])(n,o):o:i,b=this.originInstance=new n.TransitRoute(g,{renderOptions:{map:i,panel:this.$el,selectFirstResult:c,autoViewport:d,highlightMode:u},policy:e[r],pageCapacity:l,onSearchComplete:function(e){f&&f!==b&&f.clearResults(),t.$emit("searchcomplete",e)},onMarkersSet:function(e){t.$emit("markersset",e)},onInfoHtmlSet:function(e){t.$emit("infohtmlset",e)},onPolylinesSet:function(e){t.$emit("polylinesset",e)},onResultsHtmlSet:function(e){t.$emit("resultshtmlset",e)}});p(Object(s["c"])(h)?Object(a["c"])(n,h):h,Object(s["c"])(m)?Object(a["c"])(n,m):m)}}}}).call(this,i("c8ba"))},"1df6":function(e,t,i){},"23d3":function(e,t,i){},2607:function(e,t,i){},"272f":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 抽检库管理\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加新的抽检库")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downLoad}},[e._v("下载excel模板")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:function(t){e.uploadFormVisible=!0}}},[e._v("利用excel上传抽检库数据")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:e.viewprocessingprogress}},[e._v("查看excel处理进度")]),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"抽检点名称"},model:{value:e.searchname,callback:function(t){e.searchname=t},expression:"searchname"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"辖区"}},[i("span",[e._v(e._s(t.row.jurisdiction))])]),i("el-form-item",{attrs:{label:"类别"}},[i("span",[e._v(e._s(t.row.category))])]),i("el-form-item",{attrs:{label:"抽检点名称"}},[i("span",[e._v(e._s(t.row.ssl_name))])]),i("el-form-item",{attrs:{label:"地址"}},[i("span",[e._v(e._s(t.row.address))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"包含抽检食品类型"}},[i("span",[e._v(e._s(t.row.foodtype_ids))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"jurisdiction",label:"辖区"}}),i("el-table-column",{attrs:{sortable:"",prop:"category",label:"类别"}}),i("el-table-column",{attrs:{sortable:"",prop:"ssl_name",label:"抽检点名称"}}),i("el-table-column",{attrs:{prop:"address",label:"地址"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),i("el-button",{attrs:{type:"text",icon:"el-icon-guide"},on:{click:function(i){return e.handfoodtype(t.$index,t.row)}}},[e._v("抽检食品类型管理")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"辖区"}},[i("el-input",{model:{value:e.form.jurisdiction,callback:function(t){e.$set(e.form,"jurisdiction",t)},expression:"form.jurisdiction"}})],1),i("el-form-item",{attrs:{label:"类别"}},[i("el-input",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),i("el-form-item",{attrs:{label:"抽检点"}},[i("el-input",{model:{value:e.form.ssl_name,callback:function(t){e.$set(e.form,"ssl_name",t)},expression:"form.ssl_name"}})],1),i("el-form-item",{attrs:{label:"地址"}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"食品类型"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.form.foodtype_ids,callback:function(t){e.$set(e.form,"foodtype_ids",t)},expression:"form.foodtype_ids"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"添加抽检点信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.addform,rules:e.rules}},[i("el-form-item",{attrs:{prop:"jurisdiction",label:"辖区","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.jurisdiction,callback:function(t){e.$set(e.addform,"jurisdiction",t)},expression:"addform.jurisdiction"}})],1),i("el-form-item",{attrs:{prop:"category",label:"类别","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.category,callback:function(t){e.$set(e.addform,"category",t)},expression:"addform.category"}})],1),i("el-form-item",{attrs:{prop:"ssl_name",label:"抽检点","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.ssl_name,callback:function(t){e.$set(e.addform,"ssl_name",t)},expression:"addform.ssl_name"}})],1),i("el-form-item",{attrs:{prop:"address",label:"地址","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.address,callback:function(t){e.$set(e.addform,"address",t)},expression:"addform.address"}})],1),i("el-form-item",{attrs:{label:"包含食品","label-width":e.formLabelWidth}},[i("el-checkbox-group",{model:{value:e.selectedfoodtypes,callback:function(t){e.selectedfoodtypes=t},expression:"selectedfoodtypes"}},e._l(e.foodtypes,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addnewsiinformation()}}},[e._v("确 定")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"上传数据(excel请务必按照模板格式)",width:"30%",visible:e.uploadFormVisible},on:{"update:visible":function(t){e.uploadFormVisible=t}}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:3,action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"show-file-list":!0,"http-request":e.uploadSectionFile,"on-exceed":e.fileexpandLimit,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到抽检库")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件，且不超过500kb")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"食品类型管理",visible:e.foodtypeVisible,width:"30%"},on:{"update:visible":function(t){e.foodtypeVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"已分配"}},[i("el-checkbox-group",{model:{value:e.againhavedistributenames,callback:function(t){e.againhavedistributenames=t},expression:"againhavedistributenames"}},e._l(e.havedistributenames,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1),i("el-form-item",{attrs:{label:"请选择"}},[i("el-checkbox-group",{model:{value:e.distributenames,callback:function(t){e.distributenames=t},expression:"distributenames"}},e._l(e.undistributenames,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.foodtypeVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveDistribute}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"excel处理进度",visible:e.processExcelVisible},on:{"update:visible":function(t){e.processExcelVisible=t}}},[i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.processexceldata,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"文件名"}},[i("span",[e._v(e._s(t.row.excel_name))])]),i("el-form-item",{attrs:{label:"总数目"}},[i("span",[e._v(e._s(t.row.total))])]),i("el-form-item",{attrs:{label:"成功数目"}},[i("span",[e._v(e._s(t.row.successtotal))])]),i("el-form-item",{attrs:{label:"重复数目"}},[i("span",[e._v(e._s(t.row.repeattotal))])]),i("el-form-item",{attrs:{label:"上传时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"处理进度"}},[i("span",[e._v(e._s(t.row.state))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"excel_name",label:"文件名"}}),i("el-table-column",{attrs:{sortable:"",prop:"total",label:"总数目"}}),i("el-table-column",{attrs:{sortable:"",prop:"successtotal",label:"成功数目"}}),i("el-table-column",{attrs:{label:"处理进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{disabled:!0,"active-text":"处理完成","inactive-text":"正在处理"},model:{value:t.row.state,callback:function(i){e.$set(t.row,"state",i)},expression:"scope.row.state"}})]}}])}),i("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleprocessexcelDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.processexcelquery.pageIndex,"page-size":e.processexcelquery.pageSize,total:e.processexcelquery.pageTotal},on:{"current-change":e.handleProcessExcelPageChange}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"success"},on:{click:e.viewprocessingprogress}},[e._v("刷 新")]),i("el-button",{on:{click:function(t){e.processExcelVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(i("28a5"),i("6b54"),i("7f7f"),i("365c"),i("9474")),o={components:{ElCheckbox:n["a"]},name:"foodriskvaluecontrol",data:function(){return{searchname:"",rules:{jurisdiction:[{required:!0,message:"请输入辖区",trigger:"blur"}],category:[{required:!0,message:"请输入类别",trigger:"blur"}],ssl_name:[{required:!0,message:"请输入抽检点名称",trigger:"blur"}],address:[{required:!0,message:"请输入抽检点的地址",trigger:"blur"}]},formLabelWidth:"70px",query:{address:"",name:"",pageIndex:1,pageSize:8},tableData:[],selectedfoodtypes:[],foodtypes:[],multipleSelection:[],delList:[],editVisible:!1,uploadFormVisible:!1,foodtypeVisible:!1,dialogFormVisible:!1,processExcelVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,addform:{jurisdiction:"",category:"",ssl_name:"",address:""},distributenames:[],undistributenames:[],havedistributenames:[],againhavedistributenames:[],checked:!0,fileList:[],processexceldata:[],processexcelquery:{address:"",name:"",pageIndex:1,pageSize:5,pageTotal:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$axios.post("/sslibrary/getalllibrary",this.$qs.stringify({searchname:this.searchname,pageIndex:this.query.pageIndex,pageSize:this.query.pageSize})).then((function(t){if(null!=t){e.foodtypes=[],e.tableData=t.data.data.sysSamplingLibraries;for(var i=0;i<t.data.data.foodTypes.length;i++)e.foodtypes[i]=t.data.data.foodTypes[i].type_name;e.pageTotal=t.data.data.pageTotal}}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.post("/sslibrary/deletesamplinglibrarybyid",i.$qs.stringify({id:t.id})).then((function(t){null!=t&&(i.$message.success("删除成功"),i.tableData.splice(e,1))}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var i=0;i<e;i++)t+=this.multipleSelection[i].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.idx=e,this.form=t,this.editVisible=!0},saveEdit:function(){var e=this;this.editVisible=!1,this.$axios.post("/sslibrary/updatesamplinglibrarybyid",this.$qs.stringify({id:this.form.id,jurisdiction:this.form.jurisdiction,category:this.form.category,ssl_name:this.form.ssl_name,address:this.form.address})).then((function(t){null!=t?(e.$set(e.tableData,e.idx,e.form),e.$message.success("修改成功！"),e.getData()):e.getData()}))},addnewsiinformation:function(){var e=this;this.$axios.post("/sslibrary/addnewsamplinglibrary",this.$qs.stringify({category:this.addform.category,jurisdiction:this.addform.jurisdiction,ssl_name:this.addform.ssl_name,address:this.addform.address,selectedfoodtypes:this.selectedfoodtypes.toString()})).then((function(t){null!=t&&(null!=e.addform.category&&null!=e.addform.jurisdiction&&null!=e.addform.ssl_name&&null!=e.addform.address?(e.$message.success("添加成功！"),e.getData()):e.$message.error("请填写所需信息"))}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},handfoodtype:function(e,t){var i=this;this.idx=e,this.form=t,this.havedistributenames=[];var a=this.form.foodtype_ids;if(null!=a){var s=new Array;s=a.split("-");for(var n=0;n<s.length;n++)this.havedistributenames[n]=s[n]}this.againhavedistributenames=this.havedistributenames,this.$axios.post("/sstype/findalltypebyadminid",this.$qs.stringify({id:this.form.id})).then((function(e){if(null!=e){i.undistributenames=[];for(var t=0,a=0;a<e.data.data.length;a++){for(var s=1,n=e.data.data[a].type_name,o=0;o<i.havedistributenames.length;o++)if(i.havedistributenames[o]==n){s=0;break}1==s&&(i.undistributenames[t++]=n)}i.foodtypeVisible=!0}}))},saveDistribute:function(){var e=this;this.foodtypeVisible=!1,this.$axios.post("/sslibrary/savesamplingtype",this.$qs.stringify({distributenames:this.distributenames.toString(),againhavedistributenames:this.againhavedistributenames.toString(),insaccountid:this.form.id})).then((function(t){null!=t&&(e.getData(),e.$message.success("分配成功"))})),this.distributenames=[]},submitUpload:function(){this.$refs.upload.submit()},uploadSectionFile:function(e){var t=this,i=new FormData;i.set("file",e.file);var a=e.file.name,s=new Array;s=String(a).split("."),"xls"==s[1]||"xlsx"==s[1]?this.$axios.post("/sslibrary/uploadbyexcel",i,{headers:{"Content-type":"multipart/form-data"},onUploadProgress:function(t){var i=t.loaded/t.total*100|0;e.onProgress({percent:i})}}).then((function(e){null!=e&&t.$message.success("上传成功 查看详细情况请点击excel处理进度")})):this.$message.error("上传的文件不是excel")},handleRemove:function(e,t){this.$message.success("移除"+e.name+"成功")},handlePreview:function(e){console.log(e)},fileexpandLimit:function(e,t){this.$message.error("已上传文件超出限制，请删除后重试！")},viewprocessingprogress:function(){var e=this;this.processExcelVisible=!0,this.$axios.post("/sepp/getall",this.$qs.stringify({pageIndex:this.processexcelquery.pageIndex,pageSize:this.processexcelquery.pageSize})).then((function(t){null!=t&&(e.processexceldata=t.data.data.ExcelProcessingProgress,e.processexcelquery.pageTotal=t.data.data.pageTotal)}))},handleProcessExcelPageChange:function(e){this.$set(this.processexcelquery,"pageIndex",e),this.viewprocessingprogress()},handleprocessexcelDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){0!=t.state?i.$axios.post("/sepp/deleteexcel",i.$qs.stringify({id:t.id})).then((function(t){null!=t&&(i.$message.success("删除成功"),i.processexceldata.splice(e,1))})):i.$message.error("正在传入数据，不可删除")})).catch((function(){}))},downLoad:function(){window.open(this.$axios.defaults.baseURL+"/sslibrary/download","_blank")}}},r=o,l=(i("53e2d"),i("7bb0"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"016ae231",null);t["default"]=c.exports},"2b46":function(e,t,i){},"2da4":function(e,t,i){"use strict";const a={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},s=e=>e.abstract||e.$el===e.$children[0].$el?s(e.$parent):e;function n(){const{unload:e,renderByParent:t,$parent:i}=this;t&&i.reload(),e()}class o{constructor(e){this.methods={ready(){const e=s(this.$parent),t=this.BMap=e.BMap,i=this.map=e.map;this.load(),this.$emit("ready",{BMap:t,map:i})},transmitEvent(e){this.$emit(e.type.replace(/^on/,""),e)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(this.load)})},unload(){const{map:t,originInstance:i}=this;try{switch(e.type){case"search":return i.clearResults();case"autoComplete":case"lushu":return i.dispose();case"markerClusterer":return i.clearMarkers();default:t[a[e.type].unload](i)}}catch(s){}}},this.computed={renderByParent(){return this.$parent.preventChildrenRender}},this.mounted=function(){const e=s(this.$parent),t=e.map,{ready:i}=this;t?i():e.$on("ready",i)},this.destroyed=n,this.beforeDestroy=n}}t["a"]=e=>new o({type:e})},"33d3":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var a=i("76f3");const s=e=>e.lng&&e.lat,n=e=>Object.prototype.toString.call(e).slice(8,-1),o=(e,t)=>s(t)?Object(a["c"])(e,t):t},"3e92":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 基础表格\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAllSelection}},[e._v("批量删除")]),i("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"地址"},model:{value:e.query.address,callback:function(t){e.$set(e.query,"address",t)},expression:"query.address"}},[i("el-option",{key:"1",attrs:{label:"广东省",value:"广东省"}}),i("el-option",{key:"2",attrs:{label:"湖南省",value:"湖南省"}})],1),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),i("el-table-column",{attrs:{prop:"name",label:"用户名"}}),i("el-table-column",{attrs:{label:"账户余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.money))]}}])}),i("el-table-column",{attrs:{label:"头像(查看大图)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticClass:"table-td-thumb",attrs:{src:e.row.thumb,"preview-src-list":[e.row.thumb]}})]}}])}),i("el-table-column",{attrs:{prop:"address",label:"地址"}}),i("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"成功"===t.row.state?"success":"失败"===t.row.state?"danger":""}},[e._v(e._s(t.row.state))])]}}])}),i("el-table-column",{attrs:{prop:"date",label:"注册时间"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),i("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"地址"}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],n=(i("7f7f"),i("365c")),o={name:"basetable",data:function(){return{query:{address:"",name:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1}},created:function(){this.getData()},methods:{getData:function(){var e=this;Object(n["b"])(this.query).then((function(t){console.log(t),e.tableData=t.list,e.pageTotal=t.pageTotal||50}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){i.$message.success("删除成功"),i.tableData.splice(e,1)})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var i=0;i<e;i++)t+=this.multipleSelection[i].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.idx=e,this.form=t,this.editVisible=!0},saveEdit:function(){this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功")),this.$set(this.tableData,this.idx,this.form)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()}}},r=o,l=(i("4d44"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"07d5d1cb",null);t["default"]=c.exports},"4b17":function(e,t,i){},"4d44":function(e,t,i){"use strict";var a=i("23d3"),s=i.n(a);s.a},"4dae":function(e,t,i){"use strict";var a=i("8c09"),s=i.n(a);s.a},"4fab":function(e,t,i){"use strict";var a={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};t["a"]=function(e,t){const i=t||a[this.$options.name];i&&i.forEach(t=>{const i="on"===t.slice(0,2),a=i?t.slice(2):t,s=this.$listeners[a];s&&e.addEventListener(t,s.fns)})}},"53e2d":function(e,t,i){"use strict";var a=i("1df6"),s=i.n(a);s.a},"6a21":function(e,t,i){"use strict";(function(e){i("8449");var a=i("2da4"),s=i("76f3");t["a"]={name:"bm-scale",render:function(){},mixins:[Object(a["a"])("control")],props:{anchor:{type:String},offset:{type:Object}},watch:{anchor:function(){this.reload()},offset:function(){this.reload()}},methods:{load:function(){var t=this.BMap,i=this.map,a=this.anchor,n=this.offset;this.originInstance=new t.ScaleControl({anchor:e[a],offset:n&&Object(s["d"])(t,n)}),i.addControl(this.originInstance)}}}}).call(this,i("c8ba"))},"76b4":function(e,t,i){},"76f3":function(e,t,i){"use strict";function a(e,t={}){const{lng:i,lat:a}=t;return new e.Point(i,a)}function s(e,t={}){const{width:i,height:a}=t;return new e.Size(i,a)}function n(e,t={}){const{url:i,size:a,opts:n={}}=t;return new e.Icon(i,s(e,a),{anchor:n.anchor&&s(e,n.anchor),imageSize:n.imageSize&&s(e,n.imageSize),imageOffset:n.imageOffset&&s(e,n.imageOffset),infoWindowAnchor:n.infoWindowAnchor&&s(e,n.infoWindowAnchor),printImageUrl:n.printImageUrl})}function o(e,t={}){const{content:i,opts:n}=t;return new e.Label(i,{offset:n.offset&&s(e,n.offset),position:n.position&&a(e,n.position),enableMassClear:n.enableMassClear})}i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return s})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}))},"76ff":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 食品类型管理\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:e.sixteen_categories}},[e._v("查看16大类食品类型")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("增加自定义食品类型")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"自定义食品类型"}},[i("span",[e._v(e._s(t.row.type_name))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"type_name",label:"自定义食品类型"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"增加自定义食品类型",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.addform,rules:e.rules}},[i("el-form-item",{attrs:{prop:"food_type",label:"类型","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.food_type,callback:function(t){e.$set(e.addform,"food_type",t)},expression:"addform.food_type"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addnewsiinformation()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"十六大类食品类型",visible:e.sixteencategoriesVisible},on:{"update:visible":function(t){e.sixteencategoriesVisible=t}}},[i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.sixteencategoriesdata,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"食品大类"}},[i("span",[e._v(e._s(t.row.type_name))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"type_name",label:"食品大类"}})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.sixteencategoriesquery.pageIndex,"page-size":e.sixteencategoriesquery.pageSize,total:e.sixteencategoriesquery.pageTotal},on:{"current-change":e.handlesixteencategoriesPageChange}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.sixteencategoriesVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(i("365c"),i("9474")),o={components:{ElCheckbox:n["a"]},name:"foodtypemanagement",data:function(){return{searchname:"",rules:{food_type:[{required:!0,message:"请输入食品类型",trigger:"blur"}]},formLabelWidth:"70px",query:{address:"",name:"",pageIndex:1,pageSize:8},tableData:[],dialogFormVisible:!1,sixteencategoriesVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,addform:{food_type:""},checked:!0,sixteencategoriesdata:[],sixteencategoriesquery:{address:"",name:"",pageIndex:1,pageSize:5,pageTotal:0},tag:""}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$axios.post("/ssplan/findplan",this.$qs.stringify({pageIndex:this.query.pageIndex,pageSize:this.query.pageSize})).then((function(t){if(null!=t){for(var i=0;i<t.data.data.list.length;i++){var a=t.data.data.list[0].task_json;a=JSON.parse(a),e.tableData[i]=a}e.pageTotal=t.data.data.total}}))},handleDelete:function(e,t){var i=this;this.$confirm("删除后抽检库中所有抽检点都将不包含该食品类型！！确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.post("/sstype/deletecustomizecategories",i.$qs.stringify({id:t.id})).then((function(t){console.log(t),null!=t&&(i.$message.success("删除成功"),i.tableData.splice(e,1))}))})).catch((function(){}))},addnewsiinformation:function(){var e=this;this.$axios.post("/sstype/addcustomizecategories",this.$qs.stringify({food_type:this.addform.food_type})).then((function(t){null!=t&&(null!=e.addform.food_type?(e.$message.success("添加成功！"),e.getData()):e.$message.error("请填写所需信息"))}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},sixteen_categories:function(){var e=this;this.sixteencategoriesVisible=!0,this.$axios.post("/sstype/findsixteencategories",this.$qs.stringify({pageIndex:this.sixteencategoriesquery.pageIndex,pageSize:this.sixteencategoriesquery.pageSize})).then((function(t){null!=t&&(e.sixteencategoriesdata=t.data.data,e.sixteencategoriesquery.pageTotal=16)}))},handlesixteencategoriesPageChange:function(e){this.$set(this.sixteencategoriesquery,"pageIndex",e),this.sixteen_categories()}}},r=o,l=(i("a7d8"),i("e44a"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"07ef2ef8",null);t["default"]=c.exports},"7b51":function(e,t,i){"use strict";(function(e){i("ac6a"),i("c5f6");var a=i("2da4"),s=i("4fab"),n=i("76f3");t["a"]={name:"bm-info-window",mixins:[Object(a["a"])("overlay")],props:{show:{type:Boolean},position:{type:Object},title:{type:String},width:{type:Number},height:{type:Number},maxWidth:{type:Number},offset:{type:Object},maximize:{type:Boolean},autoPan:{type:Boolean},closeOnClick:{type:Boolean,default:!0},message:{type:String}},watch:{show:function(e){e?this.openInfoWindow():this.closeInfoWindow()},"position.lng":function(e,t){this.reload()},"position.lat":function(e,t){this.reload()},"offset.width":function(e,t){this.reload()},"offset.height":function(e){this.reload()},maxWidth:function(){this.reload()},width:function(e){this.originInstance.setWidth(e)},height:function(e){this.originInstance.setHeight(e)},title:function(e){this.originInstance.setTitle(e)},maximize:function(e){e?this.originInstance.enableMaximize():this.originInstance.disableMaximize()},autoPan:function(e){e?this.originInstance.enableAutoPan():this.originInstance.disableAutoPan()},closeOnClick:function(e){e?this.originInstance.enableCloseOnClick():this.originInstance.disableCloseOnClick()}},methods:{redraw:function(){this.originInstance.redraw()},load:function(){var e=this.BMap,t=this.map,i=this.show,a=this.title,o=this.width,r=this.height,l=this.maxWidth,c=this.offset,d=this.autoPan,u=this.closeOnClick,p=this.message,h=this.maximize,m=this.bindObserver,f=this.$parent,g=this.$el,b=new e.InfoWindow(g,{width:o,height:r,title:a,maxWidth:l,offset:Object(n["d"])(e,c),enableAutoPan:d,enableCloseOnClick:u,enableMessage:"undefined"===typeof p,message:p});h?b.enableMaximize():b.disableMaximize(),s["a"].call(this,b),this.originInstance=b,b.redraw(),[].forEach.call(g.querySelectorAll("img"),(function(e){e.onload=function(){return b.redraw()}})),m(),this.$container=f.originInstance&&f.originInstance.openInfoWindow?f.originInstance:t,i&&this.openInfoWindow()},bindObserver:function(){var t=e.MutationObserver;if(t){var i=this.$el,a=this.originInstance;this.observer=new t((function(e){return a.redraw()})),this.observer.observe(i,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}},openInfoWindow:function(){var e=this.BMap,t=this.$container,i=this.position,a=this.originInstance;t.openInfoWindow(a,Object(n["c"])(e,i))},closeInfoWindow:function(){this.$container.closeInfoWindow(this.originInstance)}}}}).call(this,i("c8ba"))},"7bb0":function(e,t,i){"use strict";var a=i("4b17"),s=i.n(a);s.a},"7f25e":function(e,t,i){"use strict";(function(e){i("ac6a"),i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("7f7f"),i("6b54"),i("c5f6");var a=i("4fab"),s=i("33d3");function n(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=o(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){l=!0,n=e},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw n}}}}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}t["a"]={name:"bm-map",props:{ak:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object}},watch:{center:function(e,t){var i=this.map,a=this.zoom;"String"===Object(s["a"])(e)&&e!==t&&i.centerAndZoom(e,a)},"center.lng":function(e,t){var i=this.BMap,a=this.map,s=this.zoom,n=this.center;e!==t&&e>=-180&&e<=180&&a.centerAndZoom(new i.Point(e,n.lat),s)},"center.lat":function(e,t){var i=this.BMap,a=this.map,s=this.zoom,n=this.center;e!==t&&e>=-74&&e<=74&&a.centerAndZoom(new i.Point(n.lng,e),s)},zoom:function(e,t){var i=this.map;e!==t&&e>=3&&e<=19&&i.setZoom(e)},minZoom:function(e){var t=this.map;t.setMinZoom(e)},maxZoom:function(e){var t=this.map;t.setMaxZoom(e)},highResolution:function(){this.reset()},mapClick:function(){this.reset()},mapType:function(t){var i=this.map;i.setMapType(e[t])},dragging:function(e){var t=this.map;e?t.enableDragging():t.disableDragging()},scrollWheelZoom:function(e){var t=this.map;e?t.enableScrollWheelZoom():t.disableScrollWheelZoom()},doubleClickZoom:function(e){var t=this.map;e?t.enableDoubleClickZoom():t.disableDoubleClickZoom()},keyboard:function(e){var t=this.map;e?t.enableKeyboard():t.disableKeyboard()},inertialDragging:function(e){var t=this.map;e?t.enableInertialDragging():t.disableInertialDragging()},continuousZoom:function(e){var t=this.map;e?t.enableContinuousZoom():t.disableContinuousZoom()},pinchToZoom:function(e){var t=this.map;e?t.enablePinchToZoom():t.disablePinchToZoom()},autoResize:function(e){var t=this.map;e?t.enableAutoResize():t.disableAutoResize()},theme:function(e){var t=this.map;t.setMapStyle({styleJson:e})},"mapStyle.features":{handler:function(e,t){var i=this.map,a=this.mapStyle,s=a.style,n=a.styleJson;i.setMapStyle({styleJson:n,features:e,style:s})},deep:!0},"mapStyle.style":function(e,t){var i=this.map,a=this.mapStyle,s=a.features,n=a.styleJson;i.setMapStyle({styleJson:n,features:s,style:e})},"mapStyle.styleJson":{handler:function(e,t){var i=this.map,a=this.mapStyle,s=a.features,n=a.style;i.setMapStyle({styleJson:e,features:s,style:n})},deep:!0},mapStyle:function(e){var t=this.map,i=this.theme;!i&&t.setMapStyle(e)}},methods:{setMapOptions:function(){var t=this.map,i=this.minZoom,a=this.maxZoom,s=this.mapType,n=this.dragging,o=this.scrollWheelZoom,r=this.doubleClickZoom,l=this.keyboard,c=this.inertialDragging,d=this.continuousZoom,u=this.pinchToZoom,p=this.autoResize;i&&t.setMinZoom(i),a&&t.setMaxZoom(a),s&&t.setMapType(e[s]),n?t.enableDragging():t.disableDragging(),o?t.enableScrollWheelZoom():t.disableScrollWheelZoom(),r?t.enableDoubleClickZoom():t.disableDoubleClickZoom(),l?t.enableKeyboard():t.disableKeyboard(),c?t.enableInertialDragging():t.disableInertialDragging(),d?t.enableContinuousZoom():t.disableContinuousZoom(),u?t.enablePinchToZoom():t.disablePinchToZoom(),p?t.enableAutoResize():t.disableAutoResize()},init:function(e){if(!this.map){var t,i=this.$refs.view,s=n(this.$slots.default||[]);try{for(s.s();!(t=s.n()).done;){var o=t.value;o.componentOptions&&"bm-view"===o.componentOptions.tag&&(this.hasBmView=!0,i=o.elm)}}catch(h){s.e(h)}finally{s.f()}var r=new e.Map(i,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick});this.map=r;var l=this.setMapOptions,c=this.zoom,d=this.getCenterPoint,u=this.theme,p=this.mapStyle;u?r.setMapStyle({styleJson:u}):r.setMapStyle(p),l(),a["a"].call(this,r),r.reset(),r.centerAndZoom(d(),c),this.$emit("ready",{BMap:e,map:r})}},getCenterPoint:function(){var e=this.center,t=this.BMap;switch(Object(s["a"])(e)){case"String":return e;case"Object":return new t.Point(e.lng,e.lat);default:return new t.Point}},initMap:function(e){this.BMap=e,this.init(e)},getMapScript:function(){if(e.BMap)return e.BMap._preloader?e.BMap._preloader:Promise.resolve(e.BMap);var t=this.ak||this._BMap().ak;return e.BMap={},e.BMap._preloader=new Promise((function(i,a){e._initBaiduMap=function(){i(e.BMap),e.document.body.removeChild(s),e.BMap._preloader=null,e._initBaiduMap=null};var s=document.createElement("script");e.document.body.appendChild(s),s.src="https://api.map.baidu.com/api?v=2.0&ak=".concat(t,"&callback=_initBaiduMap")})),e.BMap._preloader},reset:function(){var e=this.getMapScript,t=this.initMap;e().then(t)}},mounted:function(){this.reset()},data:function(){return{hasBmView:!1}}}}).call(this,i("c8ba"))},"8c09":function(e,t,i){},"8d07":function(e,t,i){"use strict";var a=i("2b46"),s=i.n(a);s.a},9474:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[i("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[i("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var i=e.model,a=t.target,s=a.checked?e.trueLabel:e.falseLabel;if(Array.isArray(i)){var n=null,o=e._i(i,n);a.checked?o<0&&(e.model=i.concat([n])):o>-1&&(e.model=i.slice(0,o).concat(i.slice(o+1)))}else e.model=s},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var i=e.model,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=e.label,o=e._i(i,n);a.checked?o<0&&(e.model=i.concat([n])):o>-1&&(e.model=i.slice(0,o).concat(i.slice(o+1)))}else e.model=s},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?i("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},s=[],n=(i("c5f6"),i("6b54"),i("f6f4")),o={name:"ElCheckbox",mixins:[n["a"]],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,i=e.min;return!(!t&&!i)&&this.model.length>=t&&!this.isChecked||this.model.length<=i&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t,i=this;this.isLimitExceeded||(t=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",t,e),this.$nextTick((function(){i.isGroup&&i.dispatch("ElCheckboxGroup","change",[i._checkboxGroup.value])})))}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},r=o,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);t["a"]=c.exports},9561:function(e,t,i){},a7d8:function(e,t,i){"use strict";var a=i("2607"),s=i.n(a);s.a},a849:function(e,t,i){"use strict";var a=i("11b9"),s=i.n(a);s.a},b0f5:function(e,t,i){"use strict";(function(e){i("386d"),i("c5f6");var a=i("76f3"),s=i("33d3"),n=i("2da4");t["a"]={name:"bm-driving",mixins:[Object(n["a"])("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},startCity:{type:[String,Number]},endCity:{type:[String,Number]},waypoints:{type:Array},policy:{type:String},panel:{type:Boolean,default:!0},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler:function(e){var t=this.originInstance,i=this.map;t.setLocation(e||i)},deep:!0},start:{handler:function(e){var t=this.originInstance,i=this.end,a=this.startCity,n=this.endCity,o=this.waypoints,r=this.BMap,l=this.getWaypoints;t.search(Object(s["b"])(r,e),Object(s["b"])(r,i),{startCity:a,endCity:n,waypoints:l(o)})},deep:!0},end:{handler:function(e){var t=this.originInstance,i=this.start,a=this.startCity,n=this.endCity,o=this.waypoints,r=this.BMap,l=this.getWaypoints;t.search(Object(s["b"])(r,i),Object(s["b"])(r,e),{startCity:a,endCity:n,waypoints:l(o)})},deep:!0},startCity:function(e){var t=this.originInstance,i=this.start,a=this.end,s=this.endCity,n=this.waypoints,o=this.getWaypoints;t.search(i,a,{val:e,endCity:s,waypoints:o(n)})},endCity:function(e){var t=this.originInstance,i=this.start,a=this.end,s=this.startCity,n=this.waypoints,o=this.getWaypoints;t.search(i,a,{startCity:s,val:e,waypoints:o(n)})},waypoints:{handler:function(e){var t=this.originInstance,i=this.start,a=this.end,s=this.startCity,n=this.endCity,o=this.getWaypoints;t.search(i,a,{startCity:s,endCity:n,waypoints:o(e)})},deep:!0},panel:function(){this.reload()},policy:function(e){this.reload()},autoViewport:function(){this.reload()},selectFirstResult:function(){this.reload()},highlightMode:function(){this.reload()}},methods:{search:function(e,t,i){var a=i.startCity,s=i.endCity,n=i.waypoints,o=this.originInstance,r=this.getWaypoints;o.search(e,t,{startCity:a,endCity:s,waypoints:r(n)})},getWaypoints:function(e){var t=this.BMap;if(e)return e.map((function(e){return Object(s["b"])(t,e)}))},load:function(){var t=this,i=this.map,n=this.BMap,o=this.location,r=this.policy,l=this.selectFirstResult,c=this.autoViewport,d=this.highlightMode,u=this.search,p=this.start,h=this.end,m=this.startCity,f=this.endCity,g=this.waypoints,b=this.originInstance,y=this.getWaypoints,v=o?Object(s["c"])(o)?Object(a["c"])(n,o):o:i,_=this.originInstance=new n.DrivingRoute(v,{renderOptions:{map:i,panel:this.$el,selectFirstResult:l,autoViewport:c,highlightMode:d},policy:e[r],onSearchComplete:function(e){b&&b!==_&&b.clearResults(),t.$emit("searchcomplete",e)},onMarkersSet:function(e){t.$emit("markersset",e)},onInfoHtmlSet:function(e){t.$emit("infohtmlset",e)},onPolylinesSet:function(e){t.$emit("polylinesset",e)},onResultsHtmlSet:function(e){t.$emit("resultshtmlset",e)}});u(Object(s["b"])(n,p),Object(s["b"])(n,h),{startCity:m,endCity:f,waypoints:y(g)})}}}}).call(this,i("c8ba"))},b35c:function(e,t,i){"use strict";var a=i("76b4"),s=i.n(a);s.a},b5c1:function(e,t,i){"use strict";(function(e){i("8449");var a=i("2da4"),s=i("76f3");t["a"]={name:"bm-navigation",render:function(){},mixins:[Object(a["a"])("control")],props:{anchor:{type:String},offset:{type:Object},type:{type:String},showZoomInfo:{type:Boolean},enableGeolocation:{type:Boolean,default:!1}},watch:{anchor:function(){this.reload()},offset:function(){this.reload()},type:function(){this.reload()},showZoomInfo:function(){this.reload()}},methods:{load:function(){var t=this.BMap,i=this.map,a=this.anchor,n=this.offset,o=this.type,r=this.showZoomInfo,l=this.enableGeolocation;this.originInstance=new t.NavigationControl({anchor:e[a],offset:n&&Object(s["d"])(t,n),type:e[o],showZoomInfo:r,enableGeolocation:l}),i.addControl(this.originInstance)}}}}).call(this,i("c8ba"))},beb6:function(e,t,i){},c296:function(e,t,i){(function(t){var a,s;(function(t,i){e.exports=i()})(0,(function(){"use strict";var e="undefined"!==typeof window?window:"undefined"!==typeof t?t:this;function n(t,i){return i={exports:{}},t(i,i.exports,e),i.exports}var o=n((function(e,t,n){(function(n,o){"object"===typeof t?e.exports=o():(a=o,s="function"===typeof a?a.call(t,i,t,e):a,void 0===s||(e.exports=s))})(0,(function(){var e,t=e=t||{version:"1.3.8"},i={};t.guid="$BAIDU$",i[t.guid]=i[t.guid]||{},t.dom=t.dom||{},t.dom.g=function(e){return"string"==typeof e||e instanceof String?document.getElementById(e):e&&e.nodeName&&(1==e.nodeType||9==e.nodeType)?e:null},t.g=t.G=t.dom.g,t.dom.getDocument=function(e){return e=t.dom.g(e),9==e.nodeType?e:e.ownerDocument||e.document},t.lang=t.lang||{},t.lang.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},t.isString=t.lang.isString,t.dom._g=function(e){return t.lang.isString(e)?document.getElementById(e):e},t._g=t.dom._g,t.browser=t.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(t.browser.ie=t.ie=document.documentMode||+RegExp["$1"]),t.dom.getComputedStyle=function(e,i){e=t.dom._g(e);var a,s=t.dom.getDocument(e);return s.defaultView&&s.defaultView.getComputedStyle&&(a=s.defaultView.getComputedStyle(e,null),a)?a[i]||a.getPropertyValue(i):""},t.dom._styleFixer=t.dom._styleFixer||{},t.dom._styleFilter=t.dom._styleFilter||[],t.dom._styleFilter.filter=function(e,i,a){for(var s,n=0,o=t.dom._styleFilter;s=o[n];n++)(s=s[a])&&(i=s(e,i));return i},t.string=t.string||{},t.string.toCamelCase=function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,(function(e){return e.charAt(1).toUpperCase()}))},t.dom.getStyle=function(e,i){var a=t.dom;e=a.g(e),i=t.string.toCamelCase(i);var s=e.style[i]||(e.currentStyle?e.currentStyle[i]:"")||a.getComputedStyle(e,i);if(!s){var n=a._styleFixer[i];n&&(s=n.get?n.get(e):t.dom.getStyle(e,n))}return(n=a._styleFilter)&&(s=n.filter(i,s,"get")),s},t.getStyle=t.dom.getStyle,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(t.browser.opera=+RegExp["$1"]),t.browser.isWebkit=/webkit/i.test(navigator.userAgent),t.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),t.browser.isStrict="CSS1Compat"==document.compatMode,t.dom.getPosition=function(e){e=t.dom.g(e);var i,a,s=t.dom.getDocument(e),n=t.browser,o=t.dom.getStyle,r=(n.isGecko>0&&s.getBoxObjectFor&&"absolute"==o(e,"position")&&(""===e.style.top||e.style.left),{left:0,top:0}),l=n.ie&&!n.isStrict?s.body:s.documentElement;if(e==l)return r;if(e.getBoundingClientRect){a=e.getBoundingClientRect(),r.left=Math.floor(a.left)+Math.max(s.documentElement.scrollLeft,s.body.scrollLeft),r.top=Math.floor(a.top)+Math.max(s.documentElement.scrollTop,s.body.scrollTop),r.left-=s.documentElement.clientLeft,r.top-=s.documentElement.clientTop;var c=s.body,d=parseInt(o(c,"borderLeftWidth")),u=parseInt(o(c,"borderTopWidth"));n.ie&&!n.isStrict&&(r.left-=isNaN(d)?2:d,r.top-=isNaN(u)?2:u)}else{i=e;do{if(r.left+=i.offsetLeft,r.top+=i.offsetTop,n.isWebkit>0&&"fixed"==o(i,"position")){r.left+=s.body.scrollLeft,r.top+=s.body.scrollTop;break}i=i.offsetParent}while(i&&i!=e);(n.opera>0||n.isWebkit>0&&"absolute"==o(e,"position"))&&(r.top-=s.body.offsetTop),i=e.offsetParent;while(i&&i!=s.body)r.left-=i.scrollLeft,n.opera&&"TR"==i.tagName||(r.top-=i.scrollTop),i=i.offsetParent}return r},t.event=t.event||{},t.event._listeners=t.event._listeners||[],t.event.on=function(e,i,a){i=i.replace(/^on/i,""),e=t.dom._g(e);var s,n=function(t){a.call(e,t)},o=t.event._listeners,r=t.event._eventFilter,l=i;return i=i.toLowerCase(),r&&r[i]&&(s=r[i](e,i,n),l=s.type,n=s.listener),e.addEventListener?e.addEventListener(l,n,!1):e.attachEvent&&e.attachEvent("on"+l,n),o[o.length]=[e,i,a,n,l],e},t.on=t.event.on,function(){var e=i[t.guid];t.lang.guid=function(){return"TANGRAM__"+(e._counter++).toString(36)},e._counter=e._counter||1}(),i[t.guid]._instances=i[t.guid]._instances||{},t.lang.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)},t.lang.Class=function(e){this.guid=e||t.lang.guid(),i[t.guid]._instances[this.guid]=this},i[t.guid]._instances=i[t.guid]._instances||{},t.lang.Class.prototype.dispose=function(){for(var e in delete i[t.guid]._instances[this.guid],this)t.lang.isFunction(this[e])||delete this[e];this.disposed=!0},t.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},t.lang.Event=function(e,t){this.type=e,this.returnValue=!0,this.target=t||null,this.currentTarget=null},t.lang.Class.prototype.addEventListener=function(e,i,a){if(t.lang.isFunction(i)){!this.__listeners&&(this.__listeners={});var s,n=this.__listeners;if("string"==typeof a&&a){if(/[^\w\-]/.test(a))throw"nonstandard key:"+a;i.hashCode=a,s=a}0!=e.indexOf("on")&&(e="on"+e),"object"!=typeof n[e]&&(n[e]={}),s=s||t.lang.guid(),i.hashCode=s,n[e][s]=i}},t.lang.Class.prototype.removeEventListener=function(e,i){if("undefined"==typeof i||(!t.lang.isFunction(i)||(i=i.hashCode))&&t.lang.isString(i)){!this.__listeners&&(this.__listeners={}),0!=e.indexOf("on")&&(e="on"+e);var a=this.__listeners;if(a[e])if("undefined"!=typeof i)a[e][i]&&delete a[e][i];else for(var s in a[e])delete a[e][s]}},t.lang.Class.prototype.dispatchEvent=function(e,i){for(var a in t.lang.isString(e)&&(e=new t.lang.Event(e)),!this.__listeners&&(this.__listeners={}),i=i||{},i)e[a]=i[a];var s=this.__listeners,n=e.type;if(e.target=e.target||this,e.currentTarget=this,0!=n.indexOf("on")&&(n="on"+n),t.lang.isFunction(this[n])&&this[n].apply(this,arguments),"object"==typeof s[n])for(a in s[n])s[n][a].apply(this,arguments);return e.returnValue},t.lang.inherits=function(e,t,i){var a,s,n=e.prototype,o=new Function;for(a in o.prototype=t.prototype,s=e.prototype=new o,n)s[a]=n[a];e.prototype.constructor=e,e.superClass=t.prototype,"string"==typeof i&&(s._className=i)},t.inherits=t.lang.inherits;var a="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/images/m",s="png",n=function(t,i,a){try{BMap}catch(s){throw Error("Baidu Map JS API is not ready yet!")}e.lang.inherits(n,BMap.Overlay,"TextIconOverlay"),this._position=t,this._text=i,this._options=a||{},this._styles=this._options["styles"]||[],!this._styles.length&&this._setupDefaultStyles()};return n.prototype._setupDefaultStyles=function(){for(var e,t=[53,56,66,78,90],i=0;e=t[i];i++)this._styles.push({url:a+i+"."+s,size:new BMap.Size(e,e)})},n.prototype.initialize=function(e){return this._map=e,this._domElement=document.createElement("div"),this._updateCss(),this._updateText(),this._updatePosition(),this._bind(),this._map.getPanes().markerMouseTarget.appendChild(this._domElement),this._domElement},n.prototype.draw=function(){this._map&&this._updatePosition()},n.prototype.getText=function(){return this._text},n.prototype.setText=function(e){!e||this._text&&this._text.toString()==e.toString()||(this._text=e,this._updateText(),this._updateCss(),this._updatePosition())},n.prototype.getPosition=function(){return this._position},n.prototype.setPosition=function(e){!e||this._position&&this._position.equals(e)||(this._position=e,this._updatePosition())},n.prototype.getStyleByText=function(e,t){var i=parseInt(e),a=parseInt(i/10);return a=Math.max(0,a),a=Math.min(a,t.length-1),t[a]},n.prototype._updateCss=function(){if(this._domElement){var e=this.getStyleByText(this._text,this._styles);this._domElement.style.cssText=this._buildCssText(e)}},n.prototype._updateText=function(){this._domElement&&(this._domElement.innerHTML=this._text)},n.prototype._updatePosition=function(){if(this._domElement&&this._position){var e=this._domElement.style,t=this._map.pointToOverlayPixel(this._position);t.x-=Math.ceil(parseInt(e.width)/2),t.y-=Math.ceil(parseInt(e.height)/2),e.left=t.x+"px",e.top=t.y+"px"}},n.prototype._buildCssText=function(t){var i=t["url"],a=t["size"],s=t["anchor"],n=t["offset"],o=t["textColor"]||"black",r=t["textSize"]||10,l=[];if(e.browser["ie"]<7)l.push('filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+i+'");');else{l.push("background-image:url("+i+");");var c="0 0";n instanceof BMap.Size&&(c=n.width+"px "+n.height+"px"),l.push("background-position:"+c+";")}return a instanceof BMap.Size&&(s instanceof BMap.Size?(s.height>0&&s.height<a.height&&l.push("height:"+(a.height-s.height)+"px; padding-top:"+s.height+"px;"),s.width>0&&s.width<a.width&&l.push("width:"+(a.width-s.width)+"px; padding-left:"+s.width+"px;")):(l.push("height:"+a.height+"px; line-height:"+a.height+"px;"),l.push("width:"+a.width+"px; text-align:center;"))),l.push("cursor:pointer; color:"+o+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),l.join("")},n.prototype._bind=function(){if(this._domElement){var t=this,i=this._map,a=e.lang.Event;e.event.on(this._domElement,"mouseover",(function(e){t.dispatchEvent(s(e,new a("onmouseover")))})),e.event.on(this._domElement,"mouseout",(function(e){t.dispatchEvent(s(e,new a("onmouseout")))})),e.event.on(this._domElement,"click",(function(e){t.dispatchEvent(s(e,new a("onclick")))}))}function s(t,a){var s=t.srcElement||t.target,n=t.clientX||t.pageX,o=t.clientY||t.pageY;if(t&&a&&n&&o&&s){var r=e.dom.getPosition(i.getContainer());a.pixel=new BMap.Pixel(n-r.left,o-r.top),a.point=i.pixelToPoint(a.pixel)}return a}},n}))})),r=o&&"object"===typeof o&&"default"in o?o["default"]:o,l=function(e,t,i){t=c(t);var a=e.pointToPixel(t.getNorthEast()),s=e.pointToPixel(t.getSouthWest());a.x+=i,a.y-=i,s.x-=i,s.y+=i;var n=e.pixelToPoint(a),o=e.pixelToPoint(s);return new BMap.Bounds(o,n)},c=function(e){var t=d(e.getNorthEast().lng,-180,180),i=d(e.getSouthWest().lng,-180,180),a=d(e.getNorthEast().lat,-74,74),s=d(e.getSouthWest().lat,-74,74);return new BMap.Bounds(new BMap.Point(i,s),new BMap.Point(t,a))},d=function(e,t,i){return t&&(e=Math.max(e,t)),i&&(e=Math.min(e,i)),e},u=function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(e,t){var i=-1;if(u(t))if(t.indexOf)i=t.indexOf(e);else for(var a,s=0;a=t[s];s++)if(a===e){i=s;break}return i},h=function(e,t){try{BMap}catch(n){throw Error("Baidu Map JS API is not ready yet!")}if(e){this._map=e,this._markers=[],this._clusters=[];var i=t||{};this._gridSize=i["gridSize"]||60,this._maxZoom=i["maxZoom"]||18,this._minClusterSize=i["minClusterSize"]||2,this._isAverageCenter=!1,void 0!=i["isAverageCenter"]&&(this._isAverageCenter=i["isAverageCenter"]),this._styles=i["styles"]||[];var a=this;this._map.addEventListener("zoomend",(function(){a._redraw()})),this._map.addEventListener("moveend",(function(){a._redraw()}));var s=i["markers"];u(s)&&this.addMarkers(s)}};function m(e){this._markerClusterer=e,this._map=e.getMap(),this._minClusterSize=e.getMinClusterSize(),this._isAverageCenter=e.isAverageCenter(),this._center=null,this._markers=[],this._gridBounds=null,this._isReal=!1,this._clusterMarker=new r(this._center,this._markers.length,{styles:this._markerClusterer.getStyles()})}return h.prototype.addMarkers=function(e){if(e.length){for(var t=0,i=e.length;t<i;t++)this._pushMarkerTo(e[t]);this._createClusters()}},h.prototype._pushMarkerTo=function(e){var t=p(e,this._markers);-1===t&&(e.isInCluster=!1,this._markers.push(e))},h.prototype.addMarker=function(e){this._pushMarkerTo(e),this._createClusters()},h.prototype._createClusters=function(){var e=this._map.getBounds();if(e.getCenter())for(var t,i=l(this._map,e,this._gridSize),a=0;t=this._markers[a];a++)!t.isInCluster&&i.containsPoint(t.getPosition())&&this._addToClosestCluster(t)},h.prototype._addToClosestCluster=function(e){for(var t=4e6,i=null,a=(e.getPosition(),0);o=this._clusters[a];a++){var s=o.getCenter();if(s){var n=this._map.getDistance(s,e.getPosition());n<t&&(t=n,i=o)}}if(i&&i.isMarkerInClusterBounds(e))i.addMarker(e);else{var o=new m(this);o.addMarker(e),this._clusters.push(o)}},h.prototype._clearLastClusters=function(){for(var e,t=0;e=this._clusters[t];t++)e.remove();this._clusters=[],this._removeMarkersFromCluster()},h.prototype._removeMarkersFromCluster=function(){for(var e,t=0;e=this._markers[t];t++)e.isInCluster=!1},h.prototype._removeMarkersFromMap=function(){for(var e,t=0;e=this._markers[t];t++){e.isInCluster=!1;var i=e.getLabel();this._map.removeOverlay(e),e.setLabel(i)}},h.prototype._removeMarker=function(e){var t=p(e,this._markers);return-1!==t&&(this._map.removeOverlay(e),this._markers.splice(t,1),!0)},h.prototype.removeMarker=function(e){var t=this._removeMarker(e);return t&&(this._clearLastClusters(),this._createClusters()),t},h.prototype.removeMarkers=function(e){for(var t=!1,i=0;i<e.length;i++){var a=this._removeMarker(e[i]);t=t||a}return t&&(this._clearLastClusters(),this._createClusters()),t},h.prototype.clearMarkers=function(){this._clearLastClusters(),this._removeMarkersFromMap(),this._markers=[]},h.prototype._redraw=function(){this._clearLastClusters(),this._createClusters()},h.prototype.getGridSize=function(){return this._gridSize},h.prototype.setGridSize=function(e){this._gridSize=e,this._redraw()},h.prototype.getMaxZoom=function(){return this._maxZoom},h.prototype.setMaxZoom=function(e){this._maxZoom=e,this._redraw()},h.prototype.getStyles=function(){return this._styles},h.prototype.setStyles=function(e){this._styles=e,this._redraw()},h.prototype.getMinClusterSize=function(){return this._minClusterSize},h.prototype.setMinClusterSize=function(e){this._minClusterSize=e,this._redraw()},h.prototype.isAverageCenter=function(){return this._isAverageCenter},h.prototype.getMap=function(){return this._map},h.prototype.getMarkers=function(){return this._markers},h.prototype.getClustersCount=function(){for(var e,t=0,i=0;e=this._clusters[i];i++)e.isReal()&&t++;return t},m.prototype.addMarker=function(e){if(this.isMarkerInCluster(e))return!1;if(this._center){if(this._isAverageCenter){var t=this._markers.length+1,i=(this._center.lat*(t-1)+e.getPosition().lat)/t,a=(this._center.lng*(t-1)+e.getPosition().lng)/t;this._center=new BMap.Point(a,i),this.updateGridBounds()}}else this._center=e.getPosition(),this.updateGridBounds();e.isInCluster=!0,this._markers.push(e);var s=this._markers.length;if(s<this._minClusterSize)return this._map.addOverlay(e),!0;if(s===this._minClusterSize)for(var n=0;n<s;n++){var o=this._markers[n].getLabel();this._markers[n].getMap()&&this._map.removeOverlay(this._markers[n]),this._markers[n].setLabel(o)}return this._map.addOverlay(this._clusterMarker),this._isReal=!0,this.updateClusterMarker(),!0},m.prototype.isMarkerInCluster=function(e){if(this._markers.indexOf)return-1!=this._markers.indexOf(e);for(var t,i=0;t=this._markers[i];i++)if(t===e)return!0;return!1},m.prototype.isMarkerInClusterBounds=function(e){return this._gridBounds.containsPoint(e.getPosition())},m.prototype.isReal=function(e){return this._isReal},m.prototype.updateGridBounds=function(){var e=new BMap.Bounds(this._center,this._center);this._gridBounds=l(this._map,e,this._markerClusterer.getGridSize())},m.prototype.updateClusterMarker=function(){if(this._map.getZoom()>this._markerClusterer.getMaxZoom()){this._clusterMarker&&this._map.removeOverlay(this._clusterMarker);for(var e,t=0;e=this._markers[t];t++)this._map.addOverlay(e)}else this._markers.length<this._minClusterSize?this._clusterMarker.hide():(this._clusterMarker.setPosition(this._center),this._clusterMarker.setText(this._markers.length),this._clusterMarker.addEventListener&&!this._clusterMarker._hasClickEvent&&this._clusterMarker.addEventListener("click",function(e){this._clusterMarker._hasClickEvent=!0,this._markers&&this._map.setViewport(this.getBounds())}.bind(this)))},m.prototype.remove=function(){for(var e=0;this._markers[e];e++){var t=this._markers[e].getLabel();this._markers[e].getMap()&&this._map.removeOverlay(this._markers[e]),this._markers[e].setLabel(t)}this._map.removeOverlay(this._clusterMarker),this._markers.length=0,delete this._markers},m.prototype.getBounds=function(){for(var e,t=new BMap.Bounds(this._center,this._center),i=0;e=this._markers[i];i++)t.extend(e.getPosition());return t},m.prototype.getCenter=function(){return this._center},h}))}).call(this,i("c8ba"))},dfba:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 抽检库管理\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加新的抽检库")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downLoad}},[e._v("下载excel模板")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:function(t){e.uploadFormVisible=!0}}},[e._v("利用excel上传抽检库数据")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:e.viewprocessingprogress}},[e._v("查看excel处理进度")]),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"抽检点名称"},model:{value:e.searchname,callback:function(t){e.searchname=t},expression:"searchname"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"辖区"}},[i("span",[e._v(e._s(t.row.jurisdiction))])]),i("el-form-item",{attrs:{label:"类别"}},[i("span",[e._v(e._s(t.row.category))])]),i("el-form-item",{attrs:{label:"抽检点名称"}},[i("span",[e._v(e._s(t.row.ssl_name))])]),i("el-form-item",{attrs:{label:"地址"}},[i("span",[e._v(e._s(t.row.address))])]),i("el-form-item",{attrs:{label:"更新时间"}},[i("span",[e._v(e._s(t.row.last_update_time))])]),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"包含抽检食品类型"}},[i("span",[e._v(e._s(t.row.foodtype_ids))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"jurisdiction",label:"辖区"}}),i("el-table-column",{attrs:{sortable:"",prop:"category",label:"类别"}}),i("el-table-column",{attrs:{sortable:"",prop:"ssl_name",label:"抽检点名称"}}),i("el-table-column",{attrs:{prop:"address",label:"地址"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),i("el-button",{attrs:{type:"text",icon:"el-icon-guide"},on:{click:function(i){return e.handfoodtype(t.$index,t.row)}}},[e._v("抽检食品类型管理")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"辖区"}},[i("el-input",{model:{value:e.form.jurisdiction,callback:function(t){e.$set(e.form,"jurisdiction",t)},expression:"form.jurisdiction"}})],1),i("el-form-item",{attrs:{label:"类别"}},[i("el-input",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),i("el-form-item",{attrs:{label:"抽检点"}},[i("el-input",{model:{value:e.form.ssl_name,callback:function(t){e.$set(e.form,"ssl_name",t)},expression:"form.ssl_name"}})],1),i("el-form-item",{attrs:{label:"地址"}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"食品类型"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.form.foodtype_ids,callback:function(t){e.$set(e.form,"foodtype_ids",t)},expression:"form.foodtype_ids"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"添加抽检点信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.addform,rules:e.rules}},[i("el-form-item",{attrs:{prop:"jurisdiction",label:"辖区","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.jurisdiction,callback:function(t){e.$set(e.addform,"jurisdiction",t)},expression:"addform.jurisdiction"}})],1),i("el-form-item",{attrs:{prop:"category",label:"类别","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.category,callback:function(t){e.$set(e.addform,"category",t)},expression:"addform.category"}})],1),i("el-form-item",{attrs:{prop:"ssl_name",label:"抽检点","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.ssl_name,callback:function(t){e.$set(e.addform,"ssl_name",t)},expression:"addform.ssl_name"}})],1),i("el-form-item",{attrs:{prop:"address",label:"地址","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.addform.address,callback:function(t){e.$set(e.addform,"address",t)},expression:"addform.address"}})],1),i("el-form-item",{attrs:{label:"包含食品","label-width":e.formLabelWidth}},[i("el-checkbox-group",{model:{value:e.selectedfoodtypes,callback:function(t){e.selectedfoodtypes=t},expression:"selectedfoodtypes"}},e._l(e.foodtypes,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addnewsiinformation()}}},[e._v("确 定")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"上传数据(excel请务必按照模板格式)",width:"30%",visible:e.uploadFormVisible},on:{"update:visible":function(t){e.uploadFormVisible=t}}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:3,action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"show-file-list":!0,"http-request":e.uploadSectionFile,"on-exceed":e.fileexpandLimit,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到抽检库")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件，且不超过500kb")])],1)],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"食品类型管理",visible:e.foodtypeVisible,width:"30%"},on:{"update:visible":function(t){e.foodtypeVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"已分配"}},[i("el-checkbox-group",{model:{value:e.againhavedistributenames,callback:function(t){e.againhavedistributenames=t},expression:"againhavedistributenames"}},e._l(e.havedistributenames,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1),i("el-form-item",{attrs:{label:"请选择"}},[i("el-checkbox-group",{model:{value:e.distributenames,callback:function(t){e.distributenames=t},expression:"distributenames"}},e._l(e.undistributenames,(function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.foodtypeVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveDistribute}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"excel处理进度",visible:e.processExcelVisible},on:{"update:visible":function(t){e.processExcelVisible=t}}},[i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.processexceldata,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"文件名"}},[i("span",[e._v(e._s(t.row.excel_name))])]),i("el-form-item",{attrs:{label:"总数目"}},[i("span",[e._v(e._s(t.row.total))])]),i("el-form-item",{attrs:{label:"成功数目"}},[i("span",[e._v(e._s(t.row.successtotal))])]),i("el-form-item",{attrs:{label:"重复数目"}},[i("span",[e._v(e._s(t.row.repeattotal))])]),i("el-form-item",{attrs:{label:"上传时间"}},[i("span",[e._v(e._s(t.row.create_time))])]),i("el-form-item",{attrs:{label:"处理进度"}},[i("span",[e._v(e._s(t.row.state))])])],1)]}}])}),i("el-table-column",{attrs:{sortable:"",prop:"excel_name",label:"文件名"}}),i("el-table-column",{attrs:{sortable:"",prop:"total",label:"总数目"}}),i("el-table-column",{attrs:{sortable:"",prop:"successtotal",label:"成功数目"}}),i("el-table-column",{attrs:{label:"处理进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{disabled:!0,"active-text":"处理完成","inactive-text":"正在处理"},model:{value:t.row.state,callback:function(i){e.$set(t.row,"state",i)},expression:"scope.row.state"}})]}}])}),i("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleprocessexcelDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.processexcelquery.pageIndex,"page-size":e.processexcelquery.pageSize,total:e.processexcelquery.pageTotal},on:{"current-change":e.handleProcessExcelPageChange}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"success"},on:{click:e.viewprocessingprogress}},[e._v("刷 新")]),i("el-button",{on:{click:function(t){e.processExcelVisible=!1}}},[e._v("取 消")])],1)],1)],1)},s=[],n=(i("28a5"),i("6b54"),i("7f7f"),i("365c"),i("9474")),o={components:{ElCheckbox:n["a"]},name:"samplinglibrary",data:function(){return{searchname:"",rules:{jurisdiction:[{required:!0,message:"请输入辖区",trigger:"blur"}],category:[{required:!0,message:"请输入类别",trigger:"blur"}],ssl_name:[{required:!0,message:"请输入抽检点名称",trigger:"blur"}],address:[{required:!0,message:"请输入抽检点的地址",trigger:"blur"}]},formLabelWidth:"70px",query:{address:"",name:"",pageIndex:1,pageSize:8},tableData:[],selectedfoodtypes:[],foodtypes:[],multipleSelection:[],delList:[],editVisible:!1,uploadFormVisible:!1,foodtypeVisible:!1,dialogFormVisible:!1,processExcelVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,addform:{jurisdiction:"",category:"",ssl_name:"",address:""},distributenames:[],undistributenames:[],havedistributenames:[],againhavedistributenames:[],checked:!0,fileList:[],processexceldata:[],processexcelquery:{address:"",name:"",pageIndex:1,pageSize:5,pageTotal:0}}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$axios.post("/sslibrary/getalllibrary",this.$qs.stringify({searchname:this.searchname,pageIndex:this.query.pageIndex,pageSize:this.query.pageSize})).then((function(t){if(null!=t){console.log(t),e.foodtypes=[],e.tableData=t.data.data.sysSamplingLibraries;for(var i=0;i<t.data.data.foodTypes.length;i++)e.foodtypes[i]=t.data.data.foodTypes[i].type_name;e.pageTotal=t.data.data.pageTotal}}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.post("/sslibrary/deletesamplinglibrarybyid",i.$qs.stringify({id:t.id})).then((function(t){null!=t&&(i.$message.success("删除成功"),i.tableData.splice(e,1))}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var i=0;i<e;i++)t+=this.multipleSelection[i].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.idx=e,this.form=t,this.editVisible=!0},saveEdit:function(){var e=this;this.editVisible=!1,this.$axios.post("/sslibrary/updatesamplinglibrarybyid",this.$qs.stringify({id:this.form.id,jurisdiction:this.form.jurisdiction,category:this.form.category,ssl_name:this.form.ssl_name,address:this.form.address})).then((function(t){null!=t?(e.$set(e.tableData,e.idx,e.form),e.$message.success("修改成功！"),e.getData()):e.getData()}))},addnewsiinformation:function(){var e=this;this.$axios.post("/sslibrary/addnewsamplinglibrary",this.$qs.stringify({category:this.addform.category,jurisdiction:this.addform.jurisdiction,ssl_name:this.addform.ssl_name,address:this.addform.address,selectedfoodtypes:this.selectedfoodtypes.toString()})).then((function(t){null!=t&&(null!=e.addform.category&&null!=e.addform.jurisdiction&&null!=e.addform.ssl_name&&null!=e.addform.address?(e.$message.success("添加成功！"),e.getData()):e.$message.error("请填写所需信息"))}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},handfoodtype:function(e,t){var i=this;this.idx=e,this.form=t,this.havedistributenames=[];var a=this.form.foodtype_ids;if(null!=a){var s=new Array;s=a.split("-");for(var n=0;n<s.length;n++)this.havedistributenames[n]=s[n]}this.againhavedistributenames=this.havedistributenames,this.$axios.post("/sstype/findalltypebyadminid",this.$qs.stringify({id:this.form.id})).then((function(e){if(null!=e){i.undistributenames=[];for(var t=0,a=0;a<e.data.data.length;a++){for(var s=1,n=e.data.data[a].type_name,o=0;o<i.havedistributenames.length;o++)if(i.havedistributenames[o]==n){s=0;break}1==s&&(i.undistributenames[t++]=n)}i.foodtypeVisible=!0}}))},saveDistribute:function(){var e=this;this.foodtypeVisible=!1,this.$axios.post("/sslibrary/savesamplingtype",this.$qs.stringify({distributenames:this.distributenames.toString(),againhavedistributenames:this.againhavedistributenames.toString(),insaccountid:this.form.id})).then((function(t){null!=t&&(e.getData(),e.$message.success("分配成功"))})),this.distributenames=[]},submitUpload:function(){this.$refs.upload.submit()},uploadSectionFile:function(e){var t=this,i=new FormData;i.set("file",e.file);var a=e.file.name,s=new Array;s=String(a).split("."),"xls"==s[1]||"xlsx"==s[1]?this.$axios.post("/sslibrary/uploadbyexcel",i,{headers:{"Content-type":"multipart/form-data"},onUploadProgress:function(t){var i=t.loaded/t.total*100|0;e.onProgress({percent:i})}}).then((function(e){null!=e&&t.$message.success("上传成功 查看详细情况请点击excel处理进度")})):this.$message.error("上传的文件不是excel")},handleRemove:function(e,t){this.$message.success("移除"+e.name+"成功")},handlePreview:function(e){console.log(e)},fileexpandLimit:function(e,t){this.$message.error("已上传文件超出限制，请删除后重试！")},viewprocessingprogress:function(){var e=this;this.processExcelVisible=!0,this.$axios.post("/sepp/getall",this.$qs.stringify({pageIndex:this.processexcelquery.pageIndex,pageSize:this.processexcelquery.pageSize})).then((function(t){null!=t&&(e.processexceldata=t.data.data.ExcelProcessingProgress,e.processexcelquery.pageTotal=t.data.data.pageTotal)}))},handleProcessExcelPageChange:function(e){this.$set(this.processexcelquery,"pageIndex",e),this.viewprocessingprogress()},handleprocessexcelDelete:function(e,t){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){0!=t.state?i.$axios.post("/sepp/deleteexcel",i.$qs.stringify({id:t.id})).then((function(t){null!=t&&(i.$message.success("删除成功"),i.processexceldata.splice(e,1))})):i.$message.error("正在传入数据，不可删除")})).catch((function(){}))},downLoad:function(){window.open(this.$axios.defaults.baseURL+"/sslibrary/download","_blank")}}},r=o,l=(i("4dae"),i("a849"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"9ee03626",null);t["default"]=c.exports},e117:function(e,t,i){"use strict";var a=i("9561"),s=i.n(a);s.a},e44a:function(e,t,i){"use strict";var a=i("077a"),s=i.n(a);s.a},e600:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 已生成的抽检计划\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.seecompleted()}}},[e._v("查看已完成抽检计划")]),i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-circle-close"},on:{click:function(t){return e.seeundone()}}},[e._v("查看未完成抽检计划")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.groupList,(function(t,a){return i("li",[i("span",[e._v("第"+e._s(a+1)+"组")]),i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"抽检员"}},[i("span",[e._v(" "+e._s(t.names))])]),i("el-form-item",{attrs:{label:"抽检主体"}},[i("span",[e._v(" "+e._s(t.account))])]),i("el-form-item",{attrs:{label:"接受任务时间"}},[i("span",[e._v(" "+e._s(t.acceptTimeStamp))])]),i("el-form-item",{attrs:{label:"完成任务时间"}},[i("span",[e._v(" "+e._s(t.finishTimeStamp))])]),i("el-form-item",{attrs:{label:"抽检地点顺序"}},e._l(t.samplingPointsNames,(function(a,s){return i("a",[i("span",[e._v(" "+e._s(a))]),s!=t.samplingPointsNames.length-1?i("span",[e._v(" >>")]):e._e()])})),0),i("el-form-item",{attrs:{label:"抽检地址顺序"}},e._l(t.samplePlanInfoTableList.length,(function(a){return i("a",[i("span",[e._v(e._s(t.samplePlanInfoTableList[a-1].address))]),i("span",[e._v("(该位置抽检状况："+e._s(t.samplePlanInfoTableList[a-1].state)+")")]),i("span",[e._v("(该位置抽检食品类型：")]),e._l(t.samplePlanInfoTableList[a-1].sampleofoodlist.length,(function(s){return i("a",[i("span",[e._v(e._s(t.samplePlanInfoTableList[a-1].sampleofoodlist[s-1].foodtype))]),s!=t.samplePlanInfoTableList[a-1].sampleofoodlist.length?i("span",[e._v("  ++ ")]):e._e()])})),i("span",[e._v(")")]),a!=t.samplePlanInfoTableList.length?i("span",[e._v(" >>")]):e._e()],2)})),0)],1)],1)}))}}])}),i("el-table-column",{attrs:{sortable:"",prop:"startPoint",label:"起始点"}}),i("el-table-column",{attrs:{sortable:"",prop:"samplingnames",label:"抽检点"}}),i("el-table-column",{attrs:{sortable:"",prop:"foodtypes",label:"抽检食品"}}),i("el-table-column",{attrs:{sortable:"",prop:"createTimeStamp",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return i("span",{},[e._v(e._s(e.dateFormat("YYYY-mm-dd HH:MM",t.row.createTimeStamp)))])}}])}),i("el-table-column",{attrs:{prop:"state",label:"标签",width:"100",filters:[{text:"未完成",value:"未完成"},{text:"完成",value:"完成"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"未完成"===t.row.state?"primary":"success","disable-transitions":""}},[e._v(e._s(t.row.state))])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)])},s=[],n=(i("f576"),i("a481"),i("3b2b"),i("6b54"),i("365c"),i("9474")),o={components:{ElCheckbox:n["a"]},name:"foodtypemanagement",data:function(){return{formLabelWidth:"70px",query:{address:"",name:"",pageIndex:1,pageSize:8},tableData:[],tableshow:!1,pageTotal:0,form:{},idx:-1,id:-1,completeorundo:-1}},created:function(){this.getData(-1)},mounted:function(){},methods:{getData:function(e){var t=this,i=[];this.$axios.post("/ssplan/findplan",this.$qs.stringify({val:e,pageIndex:this.query.pageIndex,pageSize:this.query.pageSize})).then((function(e){if(null!=e){console.log(e);for(var a=0;a<e.data.data.list.length;a++){var s=e.data.data.list[a].task_json;s=JSON.parse(s);for(var n="",o=s.samplingnames.length,r=0;r<o;r++)n+=s.samplingnames[r],r!=o-1&&(n+=" - ");s.samplingnames=n;var l="";for(o=s.foodtypes.length,r=0;r<o;r++)l+=s.foodtypes[r],r!=o-1&&(l+=" - ");s.foodtypes=l,i[a]=s}t.tableData=i,t.pageTotal=e.data.data.total}}))},seecompleted:function(){this.completeorundo=1,this.getData(1)},seeundone:function(){this.completeorundo=0,this.getData(0)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData(this.completeorundo)},filterTag:function(e,t){return t.state===e},dateFormat:function(e,t){var i="";t=new Date(t);var a={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var s in a)i=new RegExp("("+s+")").exec(e),i&&(e=e.replace(i[1],1==i[1].length?a[s]:a[s].padStart(i[1].length,"0")));return e}}},r=o,l=(i("b35c"),i("8d07"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"6b600c09",null);t["default"]=c.exports},ed19:function(e,t,i){},f6f4:function(e,t,i){"use strict";function a(e,t,i){this.$children.forEach(s=>{var n=s.$options.componentName;n===e?s.$emit.apply(s,[t].concat(i)):a.apply(s,[e,t].concat([i]))})}t["a"]={methods:{dispatch(e,t,i){var a=this.$parent||this.$root,s=a.$options.componentName;while(a&&(!s||s!==e))a=a.$parent,a&&(s=a.$options.componentName);a&&a.$emit.apply(a,[t].concat(i))},broadcast(e,t,i){a.call(this,e,t,i)}}}},f843:function(e,t,i){"use strict";var a=i("fa79"),s=i.n(a);s.a},fa79:function(e,t,i){}}]);